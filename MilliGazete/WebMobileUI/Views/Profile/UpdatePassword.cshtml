@model UserViewDto
@{
    ViewData["Title"] = "" + @Translator.GetByKey("updatePassword") + " - " + @Translator.GetByKey("webMainTitle");
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- breadcump start-->
<div class="container" style="margin-bottom:10px;">
    <div class="row">
        <div class="btn-group btn-breadcrumb breadcrumb-default">
            <a href="~/" class="btn btn-default"><i class="fa fa-home"></i></a>
            <h1 style="margin-left:20px;font-size: 15px;padding-top:6px;">@Translator.GetByKey("updatePassword")</h1>
        </div>
    </div>
</div>
<!-- breadcump end-->
<!-- content start-->
<div class="container">

    <div class="row">
        <div class="col-sm-3">
            <!--left col-->

            <ul class="list-group">
                <li class="list-group-item text-right"><a href="~/profilim" class="pull-left"><i class="fa fa-user"></i> @Translator.GetByKey("myProfile")</a></li>
                <li class="list-group-item text-right"><a href="javascript:;" class="pull-left"><strong><i class="fa fa-lock"></i> @Translator.GetByKey("updatePassword")</strong></a></li>
                <li class="list-group-item text-right"><a href="~/kayitli-haberlerim" class="pull-left"><i class="fa fa-bookmark"></i> @Translator.GetByKey("myNewsList")</a></li>
                <li class="list-group-item text-right"><a href="~/yorumlarim" class="pull-left"><i class="fa fa-commenting"></i> @Translator.GetByKey("myComments")</a></li>
                <li class="list-group-item text-right"><a href="~/cikis" class="pull-left"><i class="fa fa-sign-out"></i> @Translator.GetByKey("logout")</a></li>
            </ul>

        </div><!--/col-3-->
        <div class="col-sm-9">
            <div class="row">
                <div class="col-sm-12"><h2> @Translator.GetByKey("updatePassword")</h2></div>
            </div>
            <form class="form" id="registrationForm">
                <div class="form-group">
                    <div class="col-xs-6">
                        <label for="txtOldPassword"> @Translator.GetByKey("oldPassword")</label>
                        <input type="password" class="form-control" name="txtOldPassword" id="txtOldPassword">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-6">
                        <label for="txtPassword"> @Translator.GetByKey("password")</label>
                        <input type="password" class="form-control" name="txtPassword" id="txtPassword">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-6">
                        <label for="txtPassword2"> @Translator.GetByKey("repeatPassword")</label>
                        <input type="password" class="form-control" name="txtPassword2" id="txtPassword2">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-12">
                        <br>
                        <button class="btn btn-lg btn-primary" type="button" onclick="Save();"><i class="fa fa-save"></i>  @Translator.GetByKey("send")</button>
                    </div>
                </div>
            </form>

        </div><!--/col-9-->

    </div>

</div>
<!-- content end-->

@section SectionBottom{

    <script src="~/js/sweetalert.min.js"></script>

    <script>
        //Bu kısım js dosyasına taşınabilir

        function Save() {
            var _oldPassword = $('#txtOldPassword').val();
            var _password = $('#txtPassword').val();
            var _password2 = $('#txtPassword2').val();

            if (_oldPassword == "" || _password == "" || _password2 == "") {
                swal({
                    title: "@Translator.GetByKey("registerValid")",
                    text: "@Translator.GetByKey("registerValidDetail")",
                    icon: "error",
                    button: "@Translator.GetByKey("okButton")"
                });
                return;
            }

            if (_password != _password2) {
                swal({
                    title: "@Translator.GetByKey("registerPasswordValid")",
                    text: "@Translator.GetByKey("registerPasswordValidDetail")",
                    icon: "error",
                    button: "@Translator.GetByKey("okButton")"
                });
                return;
            }

            var param = { 'Password': _oldPassword, 'NewPassword': _password };
            $.ajax({
                type: "POST",
                url: "@Url.Content("~/form-password")",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: JSON.stringify(param),
                success: function (result) {
                    if (result.success) {
                        swal({
                            title: "@Translator.GetByKey("registerSuccess")",
                            text: "",
                            icon: "success",
                            showCancelButton: false,
                            showConfirmButton: false,
                            timer: 1000
                        });
                    } else {
                        swal({
                            title: "@Translator.GetByKey("registerFailed")",
                            text: "@Translator.GetByKey("registerFailedDetail")",
                            icon: "error",
                            button: "@Translator.GetByKey("okButton")"
                        });
                    }
                },
                error: function (req, status, error) {
                    console.log(error);
                }
            });

        }

    </script>
}